(self.webpackChunkintranetv3=self.webpackChunkintranetv3||[]).push([[7903],{336:(e,t,n)=>{var a=n(9755),o=n(9755);a(document).on("keyup","#login_urca",(function(){var e=a(this).val();e.length>2&&a.ajax({url:Routing.generate("api_personnel_recherche",{needle:e}),dataType:"json",success:function(e){var t="";a("#result").empty(),o.each(e,(function(e,n){t=t+"<tr><td>"+n.nom+"</td><td>"+n.prenom+"</td><td>"+n.numeroHarpege+"</td><td>"+n.username+"</td><td>"+n.mail_univ+'</td><td><a href="#" class="btn btn-success btn-outline btn-square addpersonnel" data-provide="tooltip" data-placement="bottom" title="Ajouter au departement" data-slug="'+n.slug+'"><i class="fas fa-plus"></i></a></td></tr>'})),t=t+'<tr><td colspan="6"><a href="'+Routing.generate("administration_personnel_create")+'" class="btn btn-success btn-block" data-provide="tooltip" data-placement="bottom" title="Ajouter un intervenant"><i class="fas fa-plus"></i> Si l\'internvenant n\'est pas présent dans l\'intranet vous pouvez l\'ajouter</a></td></tr>',a("#result").append(t)}})})),a(document).on("click",".addpersonnel",(function(){a.ajax({url:Routing.generate("api_personnel_add_to_departement",{slug:a(this).data("slug")}),dataType:"json",success:function(e){addCallout("Personnel ajouté au département !","success")}})})),a(document).on("click",".personnel_index_change",(function(){a(".personnel_index_change").removeClass("active show"),a(this).addClass("active show");var e=a(this).data("type");a("#listePersonnel").load(Routing.generate("administration_personnel_load_liste",{type:e}),(function(){a("#tableau").DataTable({language:dataTableLangueFr}),a("#export_csv").attr("href",Routing.generate("administration_personnel_export",{type:e,_format:"csv"})),a("#export_xlsx").attr("href",Routing.generate("administration_personnel_export",{type:e,_format:"xlsx"})),a("#export_pdf").attr("href",Routing.generate("administration_personnel_export",{type:e,_format:"pdf"}))}))})),a(document).on("change",".updateRole",(function(){a.ajax({url:Routing.generate("admin_personnel_departement_modifier_droit",{personnel:a("#personnel").val()}),method:"POST",data:{droit:a(this).val()},success:function(e){addCallout("Droits modifiés !","success")}})}))}},e=>{"use strict";e.O(0,[9755],(()=>{return t=336,e(e.s=t);var t}));e.O()}]);