(self.webpackChunk=self.webpackChunk||[]).push([[6571],{57690:(t,e,n)=>{"use strict";n(74916),n(23123),n(54678),n(56977),n(91058);var a=n(1128),r=n(19755),o=n(19755),i=1;function s(){for(var t=0,e=0,n=0,a=0,o=0,s=0,l=0,c=0,u=1;u<=i;u++){var d=r("#cm_"+u),p=r("#td_"+u),m=r("#tp_"+u);t+=parseFloat(d.val())*parseInt(r("#gr_cm_"+u).val()),e+=parseFloat(p.val())*parseInt(r("#gr_td_"+u).val()),n+=parseFloat(m.val())*parseInt(r("#gr_tp_"+u).val()),s+=parseFloat(d.val()),l+=parseFloat(p.val()),c+=parseFloat(m.val()),o=o+parseFloat(d.val())+parseFloat(p.val())+parseFloat(m.val())}a=t+e+n,r("#totalCm").html(t.toFixed(2)),r("#totalTd").html(e.toFixed(2)),r("#totalTp").html(n.toFixed(2)),r("#totalEqTd").html(a.toFixed(2)),r("#totalEtu").html(o.toFixed(2)),r("#totalHeuresCm").html(s.toFixed(2)),r("#totalHeuresTd").html(l.toFixed(2)),r("#totalHeuresTp").html(c.toFixed(2));var f=parseFloat(r("#cmMaquette").html())-s,v=parseFloat(r("#tdMaquette").html())-l,h=parseFloat(r("#tpMaquette").html())-c;r("#diffCm").html(f.toFixed(2)),r("#diffTd").html(v.toFixed(2)),r("#diffTp").html(h.toFixed(2)),f<0?r("#diffCm").addClass("erreurPrevi").removeClass("validePrevi"):r("#diffCm").addClass("validePrevi").removeClass("erreurPrevi"),v<0?r("#diffTd").addClass("erreurPrevi").removeClass("validePrevi"):r("#diffTd").addClass("validePrevi").removeClass("erreurPrevi"),h<0?r("#diffTp").addClass("erreurPrevi").removeClass("validePrevi"):r("#diffTp").addClass("validePrevi").removeClass("erreurPrevi")}r(document).on("change",".changeIntervenantPrevi",(function(t){t.preventDefault(),t.stopPropagation(),r.ajax({url:Routing.generate("administration_previsionnel_ajax_edit",{id:r(this).data("previ")}),method:"POST",data:{value:r(this).val(),field:"personnel"},success:function(){(0,a.qX)("Modification de prévisionnel enregistrée !","success")},error:function(){(0,a.qX)("Erreur lors de la modification du prévisionnel !","danger")}})})),r(document).on("change","#previSemestre",(function(t){t.preventDefault(),t.stopPropagation(),r("#blocPrevisionnel").empty().load(Routing.generate("administration_previsionnel_semestre",{semestre:r(this).val(),annee:r(this).data("annee")}))})),r(document).on("click","#reloadPreviSemestre",(function(t){t.preventDefault(),t.stopPropagation(),r("#blocPrevisionnel").empty().load(Routing.generate("administration_previsionnel_semestre",{semestre:r(this).data("semestre"),annee:r(this).data("annee")}))})),r(document).on("change","#previMatiere",(function(t){var e=r(this).val().split("_");t.preventDefault(),t.stopPropagation(),r("#blocPrevisionnel").empty().load(Routing.generate("administration_previsionnel_matiere",{matiere:e[1],type:e[0],annee:r(this).data("annee")}))})),r(document).on("click","#reloadPreviMatiere",(function(t){t.preventDefault(),t.stopPropagation(),r("#blocPrevisionnel").empty().load(Routing.generate("administration_previsionnel_matiere",{matiere:r(this).data("matiere"),type:r(this).data("type"),annee:r(this).data("annee")}))})),r(document).on("change","#previPersonnel",(function(t){t.preventDefault(),t.stopPropagation(),r("#blocPrevisionnel").empty().load(Routing.generate("administration_previsionnel_personnel",{personnel:r(this).val(),annee:r(this).data("annee")}))})),r(document).on("click","#reloadPreviPersonnel",(function(t){t.preventDefault(),t.stopPropagation(),r("#blocPrevisionnel").empty().load(Routing.generate("administration_previsionnel_personnel",{personnel:r(this).data("personnel"),annee:r(this).data("annee")}))})),r(document).on("click",".previsionnel_add_change",(function(t){t.preventDefault(),t.stopPropagation(),r(".previsionnel_add_change").removeClass("active show"),r(this).addClass("active show"),r("#mainContent").empty().load(r(this).attr("href"))})),r(document).on("click","#addIntervenantPrevisionnel",(function(t){t.preventDefault(),t.stopPropagation(),i++,r.ajax({url:Routing.generate("api_enseignants_departement"),method:"POST",success:function(t){var e='<tr>\n                        <td>\n                            <select class="form-control" data-live-search="true" name="intervenant_'+i+'" id="intervenant_'+i+'">\n                                <option value="">Choisir l\'intervenant</option>\n';o.each(t,(function(t,n){e=e+'<option value="'+n.id+'">'+n.display+"</option>\n"})),e=e+'                            </select>\n                        </td>\n                        <td><input type="text" name="cm_'+i+'" id="cm_'+i+'" data-ligne="'+i+'" class="form-control chgcm" value="0"></td>\n                        <td><input type="number" name="gr_cm_'+i+'" id="gr_cm_'+i+'" value="0" data-ligne="'+i+'" class="form-control chgcm">\n                        </td>\n                        <td id="ind_cm_'+i+'">0</td>\n                        <td style="background-color: #68C39F"><input type="text" value="0" name="td_'+i+'" id="td_'+i+'" data-ligne="'+i+'"\n                                                                     class="form-control chgtd"></td>\n                        <td style="background-color: #68C39F"><input type="number" value="0" name="gr_td_'+i+'" id="gr_td_'+i+'"\n                                                                     data-ligne="'+i+'" class="form-control chgtd"></td>\n                        <td style="background-color: #68C39F" id="ind_td_'+i+'">0</td>\n                        <td style="background-color: #FFC052"><input type="text" value="0" name="tp_'+i+'" id="tp_'+i+'" data-ligne="'+i+'"\n                                                                     class="form-control chgtp"></td>\n                        <td style="background-color: #FFC052"><input type="number" value="0" name="gr_tp_'+i+'" id="gr_tp_'+i+'"\n                                                                     data-ligne="'+i+'" class="form-control chgtp"></td>\n                        <td style="background-color: #FFC052" id="ind_tp_'+i+'">0</td>\n                    </tr>',r("#nbLigne").val(i),r("#ligneAdd").before(e),r("#intervenant_"+i).selectpicker()}})})),r(document).on("change",".chgcm",(function(t){var e=r(this).data("ligne"),n=parseFloat(r("#cm_"+e).val())/1.5;r("#ind_cm_"+e).html(n.toFixed(2)),s()})),r(document).on("change",".chgtd",(function(t){var e=r(this).data("ligne"),n=parseFloat(r("#td_"+e).val())/1.5;r("#ind_td_"+e).html(n.toFixed(2)),s()})),r(document).on("change",".chgtp",(function(t){var e=r(this).data("ligne"),n=parseFloat(r("#tp_"+e).val())/1.5;r("#ind_tp_"+e).html(n.toFixed(2)),s()})),r(document).on("change","#previsionnel_matiere",(function(){var t=r("#volumeMatiere");""===r(this).val()?t.html("Choisir d'abord une matière"):r.ajax({url:Routing.generate("api_matiere",{matiere:r(this).val()}),success:function(e){var n="PPN Officiel => CM "+e.cmFormation+" heure(s); TD "+e.tdFormation+" heure(s); TP "+e.tpFormation+" heure(s); PPN Réalisé/departement => CM "+e.cmPpn+" heure(s); TD "+e.tdPpn+" heure(s); TP "+e.tpPpn+" heure(s);";t.html(n),r("#cmMaquette").html(e.cmFormation),r("#totalHeuresCm").html(0),r("#diffCm").html(0),r("#tdMaquette").html(e.tdFormation),r("#totalHeuresTd").html(0),r("#diffTd").html(0),r("#tpMaquette").html(e.tpFormation),r("#totalHeuresTp").html(0),r("#diffTp").html(0),r("#tabheures").show()}})})),r(document).on("click","#btnGenereFichier",(function(t){t.preventDefault(),t.stopPropagation();var e=[];r("input:checkbox[name=exportChamps]:checked").each((function(){e.push(r(this).val())})),r.ajax({url:Routing.generate("export_listing.fr"),method:"POST",data:{matiere:r(this).data("matiere"),exportTypeDocument:r("input[type=radio][name=exportTypeDocument]:checked").val(),exportChamps:e,exportFormat:r("input[type=radio][name=exportFormat]:checked").val(),exportFiltre:r("input[type=radio][name=exportFiltre]:checked").val()},success:function(t){}})})),r(document).on("change","#change_annee_temp_hrs",(function(t){window.location=Routing.generate("administration_hrs_index",{annee:r(this).val()})})),r(document).on("change","#change_annee_temp_previsionnel",(function(t){window.location=Routing.generate("administration_previsionnel_index",{annee:r(this).val()})}))},1128:(t,e,n)=>{"use strict";n.d(e,{qX:()=>p,xQ:()=>g,XQ:()=>b,zl:()=>y,FX:()=>_});n(74916),n(23123),n(3843),n(83710),n(73210),n(15306),n(9653);var a,r,o,i=n(19755),s=n.n(i),l=n(86455),c=n.n(l),u=n(19755),d=!1;function p(t,e){switch(e){case"success":s().toast.success(t);break;case"danger":s().toast.error(t);break;case"warning":s().toast.warning(t)}}a=s()(location).attr("pathname"),r=a.split("/"),o=2,"index.php"===r[1]&&r.length>1&&(o=3),"super-administration"===r[o]&&(o+=1),""===r[r.length-1]&&r.pop(),s()(".menu-item").removeClass("active"),s()("#menu-"+r[o]).addClass("active"),c().mixin({customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-secondary"},buttonsStyling:!1}),s()(document).on("click",".supprimer",(function(t){t.preventDefault();var e=s()(this).attr("href"),n=s()(this).data("csrf");c().fire({title:"Confirmer la suppression ?",text:"L'opération ne pourra pas être annulée.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui, je confirme",cancelButtonText:"Non, Annuler",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-secondary"},buttonsStyling:!1}).then((function(t){t.value?s().ajax({url:e,type:"DELETE",data:{_token:n},success:function(t){t.hasOwnProperty("redirect")&&t.hasOwnProperty("url")?document.location.href=t.url:(s()("#ligne_"+t).closest("tr").remove(),p("Suppression effectuée avec succès","success"),c().fire({title:"Supprimé!",text:"L'enregistrement a été supprimé.",icon:"success",confirmButtonText:"OK",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-secondary"},buttonsStyling:!1}))},error:function(t,e,n){c().fire({title:"Erreur lors de la suppression!",text:"Merci de renouveler l'opération",icon:"error",confirmButtonText:"OK",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-secondary"},buttonsStyling:!1}),p("Erreur lors de la tentative de suppression","danger")}}):"cancel"===t.dismiss&&c().fire({title:"Cancelled",text:"OK! Tout est comme avant !",icon:"error",confirmButtonText:"OK",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-secondary"},buttonsStyling:!1})}))})),s()(document).on("click",".confirm-delete",(function(t){t.preventDefault();var e=s()(this).data("href"),n=s()(this).data("uuid"),a=s()(this).data("csrf");console.log(n),console.log(a),c().fire({title:"Confirmer la suppression ?",text:"L'opération ne pourra pas être annulée.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui, je confirme",cancelButtonText:"Non, Annuler",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-secondary"},buttonsStyling:!1}).then((function(t){t.value?s().ajax({url:Routing.generate(e,{uuid:n}),type:"DELETE",data:{_token:a},success:function(t){t.hasOwnProperty("redirect")&&t.hasOwnProperty("url")?document.location.href=t.url:(s()("#ligne_"+t).closest("tr").remove(),p("Suppression effectuée avec succès","success"),c().fire({title:"Supprimé!",text:"L'enregistrement a été supprimé.",icon:"success",confirmButtonText:"OK",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-secondary"},buttonsStyling:!1}))},error:function(t,e,n){c().fire({title:"Erreur lors de la suppression!",text:"Merci de renouveler l'opération",icon:"error",confirmButtonText:"OK",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-secondary"},buttonsStyling:!1}),p("Erreur lors de la tentative de suppression","danger")}}):"cancel"===t.dismiss&&c().fire({title:"Cancelled",text:"OK! Tout est comme avant !",icon:"error",confirmButtonText:"OK",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-secondary"},buttonsStyling:!1})}))}));var m="",f="text",v=!1;function h(t){var e=s()("#myedit-input-"+t).val();s().ajax({url:m.attr("href"),data:{field:m.data("field"),value:e,type:f},method:"POST",success:function(){m.html(e),s()("#myEdit-zone-"+t).replaceWith(m),v=!1}})}function g(t,e){var n={};return s().each(s()(t).data(),(function(t,a){if("provide"!=(t=t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()})))){if(null!=e)switch(e[t]){case"bool":a=Boolean(a);break;case"num":a=Number(a);break;case"array":a=a.split(",")}n[t]=a}})),n}function b(t){t.removeClass("is-valid").addClass("is-invalid")}function y(t){t.removeClass("is-invalid").addClass("is-valid")}function _(t){t.removeClass("is-invalid").removeClass("is-valid")}s()(document).on("click",".myedit",(function(t){t.preventDefault(),m=s()(this);var e,n,a="";v=!0,void 0!==s()(this).data("type")&&(f=s()(this).data("type")),"select"===s()(this).data("type")||("textarea"===s()(this).data("type")?(e=s()(this),n=Date.now(),d=!0,a='<div id="myEdit-zone-'+n+'">\n                      <textarea rows="5" class="form-control" id="myedit-input-'+n+'">'+e.html().trim()+'</textarea>\n                      <span class="input-group-append">\n <button class="btn btn-success-outline myedit-valide" data-key="'+n+'"><i class="fas fa-check"></i></button>\n                        <button class="btn btn-danger-outline myedit-annule"  data-key="'+n+'"><i class="fas fa-times"></i></button>\n                      </span>\n                    </div>'):a=function(t){var e=Date.now();return'<div id="myEdit-zone-'+e+'" class="input-group">\n                      <input type="text" class="form-control" id="myedit-input-'+e+'" value="'+t.html().trim()+'" >\n                      <span class="input-group-append">\n <button class="btn btn-success-outline myedit-valide"  data-key="'+e+'"><i class="fas fa-check"></i></button>\n                        <button class="btn btn-danger-outline myedit-annule"  data-key="'+e+'"><i class="fas fa-times"></i></button>\n                      </span>\n                    </div>'}(s()(this))),s()(this).replaceWith(a),s()("#myedit-input").focus()})),s()(document).on("keyup","#myedit-input",(function(t){13===t.keyCode&&!1===d?h():27===t.keyCode&&s()("#myEdit-zone").replaceWith(m)})),s()(document).on("click",".myedit-valide",(function(t){d=!1,t.preventDefault(),h(s()(this).data("key"))})),s()(document).on("keypress",(function(t){!0===v&&!1===d&&13===t.which&&(t.preventDefault(),h(s()(this).data("key"))),!0===v&&!1===d&&27===t.which&&(t.preventDefault(),s()("#myEdit-zone-"+s()(this).data("key")).replaceWith(m))})),s()(document).on("click",".myedit-annule",(function(t){t.preventDefault(),s()("#myEdit-zone-"+s()(this).data("key")).replaceWith(m)})),u.fn.dataAttr=function(t,e){return s()(this)[0].getAttribute("data-"+t)||e},u.fn.hasDataAttr=function(t){return s()(this)[0].hasAttribute("data-"+t)}},2814:(t,e,n)=>{var a=n(17854),r=n(53111).trim,o=n(81361),i=a.parseFloat,s=1/i(o+"-0")!=-1/0;t.exports=s?function(t){var e=r(String(t)),n=i(e);return 0===n&&"-"==e.charAt(0)?-0:n}:i},83009:(t,e,n)=>{var a=n(17854),r=n(53111).trim,o=n(81361),i=a.parseInt,s=/^[+-]?0[Xx]/,l=8!==i(o+"08")||22!==i(o+"0x16");t.exports=l?function(t,e){var n=r(String(t));return i(n,e>>>0||(s.test(n)?16:10))}:i},38415:(t,e,n)=>{"use strict";var a=n(99958),r=n(84488);t.exports="".repeat||function(t){var e=String(r(this)),n="",o=a(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},50863:(t,e,n)=>{var a=n(84326);t.exports=function(t){if("number"!=typeof t&&"Number"!=a(t))throw TypeError("Incorrect invocation");return+t}},56977:(t,e,n)=>{"use strict";var a=n(82109),r=n(99958),o=n(50863),i=n(38415),s=n(47293),l=1..toFixed,c=Math.floor,u=function(t,e,n){return 0===e?n:e%2==1?u(t,e-1,n*t):u(t*t,e/2,n)};a({target:"Number",proto:!0,forced:l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){l.call({})}))},{toFixed:function(t){var e,n,a,s,l=o(this),d=r(t),p=[0,0,0,0,0,0],m="",f="0",v=function(t,e){for(var n=-1,a=e;++n<6;)a+=t*p[n],p[n]=a%1e7,a=c(a/1e7)},h=function(t){for(var e=6,n=0;--e>=0;)n+=p[e],p[e]=c(n/t),n=n%t*1e7},g=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==p[t]){var n=String(p[t]);e=""===e?n:e+i.call("0",7-n.length)+n}return e};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(m="-",l=-l),l>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(l*u(2,69,1))-69)<0?l*u(2,-e,1):l/u(2,e,1),n*=4503599627370496,(e=52-e)>0){for(v(0,n),a=d;a>=7;)v(1e7,0),a-=7;for(v(u(10,a,1),0),a=e-1;a>=23;)h(1<<23),a-=23;h(1<<a),v(1,1),h(2),f=g()}else v(0,n),v(1<<-e,0),f=g()+i.call("0",d);return f=d>0?m+((s=f.length)<=d?"0."+i.call("0",d-s)+f:f.slice(0,s-d)+"."+f.slice(s-d)):m+f}})},54678:(t,e,n)=>{var a=n(82109),r=n(2814);a({global:!0,forced:parseFloat!=r},{parseFloat:r})},91058:(t,e,n)=>{var a=n(82109),r=n(83009);a({global:!0,forced:parseInt!=r},{parseInt:r})}},0,[[57690,3666,9755,2109,6208,9904]]]);